{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a');\nconst imagesFetch = document.querySelector('.imagesFetch');\nexport function renderImage(results) {\n  const markup = results.reduce((html, result) => {\n    return (html += `\n          <li class=\"imagesFetch-item\">\n          <div class=\"gallery\">\n                 <a href=\"${result.largeImageURL}\">\n                    <img src=\"${result.webformatURL}\" alt=\"1\"/>\n                 </a>\n          </div>\n          <div class=\"imagesFetch-item-description\">\n              <ul class=\"description-list\">\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Likes</p>\n                  <span>${result.likes}</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Views</p>\n                  <span>${result.views}900290</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Comments</p>\n                  <span>${result.comments}229</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Downloads</p>\n                  <span>${result.downloads}610937</span>\n              </li>\n              </ul>\n          </div>\n          </li>  `);\n  }, '');\n  imagesFetch.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh();\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// let page = 1;\nexport async function fetchImg(inputValue, page) {\n  const APIKEY = '43173042-04092544e8d4f8f0c3df25e51';\n  const searchParams = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  const { data } = await axios.get(\n    `https://pixabay.com/api/?key=${APIKEY}&q=${inputValue}&${searchParams}`\n  );\n\n  return data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderImage } from './js/render-functions';\nimport { fetchImg } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst imagesFetch = document.querySelector('.imagesFetch');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn');\nconst formInput = document.querySelector('.form-input');\nlet page = 1;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const inputValue = formInput.value.trim();\n  imagesFetch.innerHTML = '';\n\n  if (inputValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Enter search images value',\n      position: 'topRight',\n    });\n    btnMore.style.display = 'none';\n    return;\n  }\n\n  try {\n    loader.style.display = 'block';\n    page = 1;\n    const data = await fetchImg(inputValue, page);\n    if (data.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    loader.style.display = 'none';\n    renderImage(data.hits);\n    btnMore.style.display = 'block';\n    if (data.hits.length < 15) {\n      btnMore.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n    btnMore.dataset.inputValue = inputValue;\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n    });\n  }\n\n  formInput.value = '';\n});\n\nbtnMore.addEventListener('click', async e => {\n  e.preventDefault();\n  page++;\n  loader.style.display = 'block';\n\n  try {\n    const inputValue = e.currentTarget.dataset.inputValue;\n    const data = await fetchImg(inputValue, page);\n\n    loader.style.display = 'none';\n    renderImage(data.hits);\n\n    const imgBoxes = document.querySelectorAll('.imagesFetch-item');\n    const imgBoxHeight = imgBoxes[0].getBoundingClientRect();\n\n    window.scrollBy({\n      top: imgBoxHeight.height * 2,\n      behavior: 'smooth',\n    });\n\n    if (data.hits.length < 15) {\n      btnMore.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n    });\n    loader.style.display = 'none';\n  }\n});\n"],"names":["gallery","SimpleLightbox","imagesFetch","renderImage","results","markup","html","result","fetchImg","inputValue","page","APIKEY","searchParams","data","axios","form","loader","btnMore","formInput","e","iziToast","imgBoxHeight"],"mappings":"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"}