{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a');\nconst imagesFetch = document.querySelector('.imagesFetch');\nexport function renderImage(results) {\n  const markup = results.reduce((html, result) => {\n    return (html += `\n          <li class=\"imagesFetch-item\">\n          <div class=\"gallery\">\n                 <a href=\"${result.largeImageURL}\">\n                    <img src=\"${result.webformatURL}\" alt=\"1\"/>\n                 </a>\n          </div>\n          <div class=\"imagesFetch-item-description\">\n              <ul class=\"description-list\">\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Likes</p>\n                  <span>${result.likes}</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Views</p>\n                  <span>${result.views}900290</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Comments</p>\n                  <span>${result.comments}229</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Downloads</p>\n                  <span>${result.downloads}610937</span>\n              </li>\n              </ul>\n          </div>\n          </li>  `);\n  }, '');\n  imagesFetch.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh();\n  const imgBoxes = document.querySelectorAll('.imagesFetch-item');\n\n  imgBoxes.forEach(item => {\n    // console.log('item: ', item);\n    const itemHeight = item.getBoundingClientRect();\n\n    window.scrollBy({\n      top: itemHeight.height * 2,\n      behavior: 'smooth',\n    });\n  });\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nconst btnMore = document.querySelector('.btn');\nlet page = 1;\nexport async function fetchImg(inputValue) {\n  const APIKEY = '43173042-04092544e8d4f8f0c3df25e51';\n  const searchParams = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${APIKEY}&q=${inputValue}&${searchParams}`\n    );\n    // console.log('response: ', response);\n    // console.log('page: ', page);\n    // console.log('response.totalHits: ', response.data.totalHits);\n    if (page * 15 > response.data.totalHits) {\n      // btnMore.innerHTML = 'no more posts to load';\n      btnMore.style.display = 'none';\n\n      return iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n    page++;\n    console.log('page: ', page);\n\n    return response;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","import axios from 'axios';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderImage } from './js/render-functions';\n// import { fetchImage } from './js/pixabay-api';\nimport { fetchImg } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst imagesFetch = document.querySelector('.imagesFetch');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn');\nconst formInput = document.querySelector('.form-input');\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  const inputValue = formInput.value.trim();\n  imagesFetch.innerHTML = '';\n  if (inputValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Enter search images value',\n      position: 'topRight',\n    });\n    return;\n  }\n  loader.style.display = 'block';\n  fetchImg(inputValue)\n    .then(response => {\n      console.log('response: ', response);\n      if (response.data.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      }\n      loader.style.display = 'none';\n      renderImage(response.data.hits);\n\n      btnMore.style.display = 'block';\n      btnMore.addEventListener('click', () => {\n        // const inputValue = formInput.value.trim();\n\n        loader.style.display = 'block';\n        fetchImg(inputValue)\n          .then(response => {\n            console.log('response2: ', response);\n            loader.style.display = 'none';\n\n            renderImage(response.data.hits);\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      });\n    })\n    .catch(error => {\n      console.log(error);\n    });\n\n  formInput.value = '';\n});\n"],"names":["gallery","SimpleLightbox","imagesFetch","renderImage","results","markup","html","result","item","itemHeight","btnMore","page","fetchImg","inputValue","APIKEY","searchParams","response","axios","iziToast","error","form","loader","formInput","e"],"mappings":"owBAKA,IAAIA,EAAU,IAAIC,EAAe,YAAY,EAC7C,MAAMC,EAAc,SAAS,cAAc,cAAc,EAClD,SAASC,EAAYC,EAAS,CACnC,MAAMC,EAASD,EAAQ,OAAO,CAACE,EAAMC,IAC3BD,GAAQ;AAAA;AAAA;AAAA,4BAGQC,EAAO,aAAa;AAAA,gCAChBA,EAAO,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOzBA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,0BAIZA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,0BAIZA,EAAO,QAAQ;AAAA;AAAA;AAAA;AAAA,0BAIfA,EAAO,SAAS;AAAA;AAAA;AAAA;AAAA,mBAKrC,EAAE,EACLL,EAAY,mBAAmB,YAAaG,CAAM,EAElDL,EAAQ,QAAO,EACE,SAAS,iBAAiB,mBAAmB,EAErD,QAAQQ,GAAQ,CAEvB,MAAMC,EAAaD,EAAK,wBAExB,OAAO,SAAS,CACd,IAAKC,EAAW,OAAS,EACzB,SAAU,QAChB,CAAK,CACL,CAAG,CACH,CChDA,MAAMC,EAAU,SAAS,cAAc,MAAM,EAC7C,IAAIC,EAAO,EACJ,eAAeC,EAASC,EAAY,CACzC,MAAMC,EAAS,qCACTC,EAAe,IAAI,gBAAgB,CACvC,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,SAAU,GACV,KAAMJ,CACV,CAAG,EACD,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAM,IAC3B,gCAAgCH,CAAM,MAAMD,CAAU,IAAIE,CAAY,EAC5E,EAII,OAAIJ,EAAO,GAAKK,EAAS,KAAK,WAE5BN,EAAQ,MAAM,QAAU,OAEjBQ,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,8CACjB,CAAO,IAEHP,IACA,QAAQ,IAAI,SAAUA,CAAI,EAEnBK,EACR,OAAQG,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CC7BA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrClB,EAAc,SAAS,cAAc,cAAc,EACnDmB,EAAS,SAAS,cAAc,SAAS,EACzCX,EAAU,SAAS,cAAc,MAAM,EACvCY,EAAY,SAAS,cAAc,aAAa,EAEtDF,EAAK,iBAAiB,SAAUG,GAAK,CACnCA,EAAE,eAAc,EAChB,MAAMV,EAAaS,EAAU,MAAM,KAAI,EAEvC,GADApB,EAAY,UAAY,GACpBW,IAAe,GAAI,CACrBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4BACT,SAAU,UAChB,CAAK,EACD,MACD,CACDG,EAAO,MAAM,QAAU,QACvBT,EAASC,CAAU,EAChB,KAAKG,GAAY,CAChB,QAAQ,IAAI,aAAcA,CAAQ,EAC9BA,EAAS,KAAK,SAAW,GAC3BE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UACpB,CAAS,EAEHG,EAAO,MAAM,QAAU,OACvBlB,EAAYa,EAAS,KAAK,IAAI,EAE9BN,EAAQ,MAAM,QAAU,QACxBA,EAAQ,iBAAiB,QAAS,IAAM,CAGtCW,EAAO,MAAM,QAAU,QACvBT,EAASC,CAAU,EAChB,KAAKG,GAAY,CAChB,QAAQ,IAAI,cAAeA,CAAQ,EACnCK,EAAO,MAAM,QAAU,OAEvBlB,EAAYa,EAAS,KAAK,IAAI,CAC1C,CAAW,EACA,MAAMG,GAAS,CACd,QAAQ,IAAIA,CAAK,CAC7B,CAAW,CACX,CAAO,CACP,CAAK,EACA,MAAMA,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EAEHG,EAAU,MAAQ,EACpB,CAAC"}